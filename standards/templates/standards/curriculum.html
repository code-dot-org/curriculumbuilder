{% extends "baselesson.html" %}

{% load staticfiles %}
{% load mezzanine_tags %}
{% load keyword_tags %}

{% block meta_title %}{{ curriculum.title }} Standards Alignment{% endblock %}

{% block meta_keywords %}{% metablock %}
    {% keywords_for page as keywords %}
    {% for keyword in keywords %}
        {% if not forloop.first %}, {% endif %}
        {{ keyword }}
    {% endfor %}
{% endmetablock %}{% endblock %}

{% block meta_description %}{% metablock %}
    {{ curriculum.description }}
{% endmetablock %}{% endblock %}

{% block title %}
    {% editable curriculum.title %}{{ curriculum.title }}{% endeditable %}
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static "css/lesson.css" %}">
{% endblock %}

{% block header_title %}
    <h1>{{ curriculum.title }}</h1>
{% endblock %}

{% block main %}
    {% for unit in curriculum.unit_set.all %}
    <div class="together">
        <h2><a href="{% url 'curriculum:unit_view' curriculum.slug unit.slug %}">{{ unit.title }}</a></h2>
        <ul>
        {% for lesson in unit.unitlesson_set.all %}
            <li><a href="{% url 'curriculum:lesson_view' curriculum.slug unit.slug forloop.counter%}">
            {{ lesson }} - {{ lesson.standards.count }}</a></li>
            <ul>
                {% with lesson.standards.all as standards %}
                {% regroup standards by framework as standards_by_framework %}
                {% for framework in standards_by_framework %}
                    <h3>{{ framework.grouper }}</h3>
                    <ul>
                    {% for standard in framework.list %}
                        <li><strong>{{ standard.slug }}</strong> - {{ standard.name }}</li>
                    {% endfor %}
                    </ul>
                {% endfor %}
                {% endwith %}
            </ul>
        {% endfor %}
        </ul>
    </div>
    {% endfor %}

{% endblock %}
