/**
 * SuperTable makes the thead of any Table scroll with the browser
 * This is sometimes preferable over pure CSS table head scrolling as it
 * gives the user a more fluid experience if they prefer not to have more
 * than the one scroll-bar in the browser window.
 *
 * Author: Andrew Hackley
 * Released under the MIT license
 * https://github.com/hackley2/super-table
 *
 * Date: 2016-01-012
 *
 */
!function(o){o.fn.superTable=function(t){return this.each(function(){function s(t){return o.extend(_,t),e(),_.rowCollapse&&b(),_.columnCollapse&&w(),1==_.remove?void(_.remove=!1):void(_.startCollapsed&&(m(!1),C(!1)))}function e(){_.scrollHead&&r(),_.scrollColumn&&u()}function r(){return _.remove?(o(Q).remove(),o(window).off("scroll"),void o(window).off("resize")):void(0!=o(M).length?(f(),h()):l())}function l(){var t=W.attr("class"),s="<div id='"+B+"div' class='hidden' style='display:none; overflow:hidden; border-bottom:1px solid "+W.css("border-right-color")+";'><table id='"+B+"' class='"+t+"' style='border: none !important;'></table></div>";o("body").append(s),o(Q).css("border-left-width",W.css("border-left-width")),o(Q).css("border-left-color",W.css("border-left-color")),o(Q).css("border-left-style",W.css("border-left-style")),o(Q).css("border-right-width",W.css("border-right-width")),o(Q).css("border-right-color",W.css("border-right-color")),o(Q).css("border-right-style",W.css("border-right-style"));var e=W.children("thead").clone();e.appendTo(M),e=W.children("tbody").clone(),e.appendTo(M);var r=W.offset();o(Q).css({position:"fixed",marginLeft:"0px",marginTop:"0px",top:"0px",left:r.left,"z-index":"1111"}),c(),f(),h(),o(window).on("scroll",function(){h()}),o(window).on("resize",function(){f(),c(),h()})}function d(){H||(o(Q).show().css("display","block"),H=!0)}function n(){L||(o(D).show().css("display","block"),L=!0)}function a(){H&&(o(Q).hide(),H=!1)}function i(){L&&(o(D).hide(),L=!1)}function c(){o(Q).css("height",W.children("thead").height())}function f(){o(Q).css("width",W.outerWidth())}function p(){o(D).css("width",E()),o(A).css("width",W.outerWidth())}function h(){if(W.filter(":visible").length>=1){var t=W.offset(),s=W.height(),e=o(Q).offset(),r=o(Q).height(),l=o(window).scrollLeft(),n=o(window).scrollTop();if(t.left!=l+e.left){var i=0-(l-t.left);o(Q).css("left",i+"px")}if(t.top<e.top&&t.top+s>e.top){var c=t.top+s-n;c-=r,0>=c?o(Q).css("top",c+"px"):o(Q).css("top","0px"),d()}else a()}else a()}function u(){if(_.remove)return o(D).remove(),o(window).off("scroll"),void o(window).off("resize");var t=W.attr("class"),s=W.outerWidth(),e=E();if(0!=o(A).length)o(D).width(e);else{var r="<div id='"+q+"div' style='display:none; overflow:hidden; border-right:1px solid; background:white; "+W.css("border-right-color")+";'><table id='"+q+"' class='"+t+"' style='padding:0; background: white; width:"+s+"px; border-bottom-width:"+W.css("border-bottom-width")+"; top: -1px;'></table></div>";o("body").append(r);var l=W.children("thead"),d=l.clone();d.appendTo(A),l=W.children("tbody"),d=l.clone(),d.appendTo(A),o(D).width(e),o(D).css({position:"fixed",marginLeft:"0px",marginTop:"0px",top:"0px",left:"0px","z-index":"1110"}),o(A).css({"background-color":W.find(" th:nth-child(2)").css("background-color"),marginBottom:"0px"}),v(),o(window).on("scroll",function(){v()}),o(window).on("resize",function(){v()})}}function v(){if(W.filter(":visible").length>=1){var t=W.offset(),s=W.width(),e=o(D).offset(),r=o(D).width(),l=o(window).scrollLeft(),d=o(window).scrollTop(),a=o(window).width();if(p(),t.top!=e.top){var c=0-(d-t.top);o(D).css("top",c+"px")}if(t.left<l&&t.left<l+a){var f=t.left+s-e.left-r;0>f?(o(D).css("left",f+"px"),n()):(o(D).css("left","0px"),n())}else i()}else i()}function w(){var t=o("."+T()+">thead>tr>th"),s=o('*[data-super-table="'+W.attr("id")+'"]');return _.remove?(t.off("click"),s.off("click"),void t.css("cursor","auto")):(t.css("cursor","pointer"),t.on("click",function(){var t=o(this).attr("data-ST-group");C(t)}),void s.on("click",function(){var o=!1;C(o)}))}function C(t){var s="";t&&(s="[data-ST-group='"+t+"']");var r=!1;_.columnCollapsedClass!=_.columnExpandedClass&&""!=_.columnCollapsedClass&&""!=_.columnExpandedClass&&(r=!0);var l=o("."+T()+" .columnHideable"+s);"none"!=l.css("display")?(l.hide(),o("."+T()+" "+s+"[data-colspanmin]").each(function(){var t=o(this).attr("data-colspanmin");o(this).attr("colspan",t)}),r&&o("."+T()+" ."+_.columnExpandedClass+s).removeClass(_.columnExpandedClass).addClass(_.columnCollapsedClass)):(l.show(),o("."+T()+" "+s+"[data-colspanmax]").each(function(){var t=o(this).attr("data-colspanmax");o(this).attr("colspan",t)}),r&&o("."+T()+" ."+_.columnCollapsedClass+s).removeClass(_.columnCollapsedClass).addClass(_.columnExpandedClass)),c(),p(),e()}function b(){var t=o("."+T()+">tbody>tr>td:first-child"),s=o("."+T()+">thead>tr>th:first-child"),e=o('*[data-super-table="'+W.attr("id")+'"]');return _.remove?(t.off("click"),s.off("click"),e.off("click"),void t.css("cursor","auto")):(t.css("cursor","pointer"),t.on("click",function(){var t=o(this).parent().attr("data-ST-group");m(t)}),s.on("click",function(){var o=!1;m(o)}),void e.on("click",function(){var o=!1;m(o)}))}function m(t){var s=!1;_.rowCollapsedClass!=_.rowExpandedClass&&""!=_.rowCollapsedClass&&""!=_.rowExpandedClass&&(s=!0);var r="";t&&(r="[data-ST-group='"+t+"']");var l=o("."+T()+" .rowHideable"+r);l.hasClass("hidden")?(l.removeClass("hidden").show(),s&&g(r)):(l.addClass("hidden").hide(),s&&x(r)),e()}function x(t){o("."+T()+" "+t+" ."+_.rowCollapsedClass).removeClass(_.rowCollapsedClass).addClass(_.rowExpandedClass)}function g(t){o("."+T()+" "+t+" ."+_.rowExpandedClass).removeClass(_.rowExpandedClass).addClass(_.rowCollapsedClass)}function T(){return j}function y(){if(""==j){var t="";if(null==W.attr("id")||""==W.attr("id"))for(var s=0;j="";s++)0==o(".ST_"+s).length&&(t="ST_"+s);else t="ST_"+W.attr("id");k(t),W.addClass(t),W.attr("data-ST-id",t)}}function k(o){j=o}function E(){var o=S(),t=z();return Math.max(o,t)}function S(){var t=0;return W.children("tbody").children("tr").children("td:first-child").each(function(){0==t&&(t=o(this).innerWidth())}),t}function z(){var t=0;return W.children("thead").children("tr").children("th:first-child").each(function(){var s=o(this).outerWidth();s>t&&(t=s)}),t}var W=o(this),_=o.fn.superTable.defaults;o.extend(_,t);var H=!1,L=!1,j="";W.attr("data-ST-id")?j=W.attr("data-ST-id"):y();var B=T()+"_head",M="#"+B,Q=M+"div",q=T()+"_column",A="#"+q,D=A+"div";s(t)})},o.fn.superTable.defaults={scrollHead:!0,scrollColumn:!0,rowCollapse:!1,rowCollapsedClass:"",rowExpandedClass:"",columnCollapse:!1,columnCollapsedClass:"",columnExpandedClass:"",startCollapsed:!1,remove:!1}}(jQuery);